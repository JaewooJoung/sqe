---
layout: default
title: Severity Check for Code Testing
---

<div class="container">
  <div class="controls">
    <select id="severity">
      {% for level in site.data.severity_matrix.asil_levels.severity %}
        <option value="{{ level.id }}">{{ level.id }} {{ level.name }}</option>
      {% endfor %}
    </select>

    <select id="exposure">
      {% for level in site.data.severity_matrix.asil_levels.exposure %}
        <option value="{{ level.id }}">{{ level.id }} {{ level.name }}</option>
      {% endfor %}
    </select>

    <select id="controllability">
      {% for level in site.data.severity_matrix.asil_levels.controllability %}
        <option value="{{ level.id }}">{{ level.id }} {{ level.name }}</option>
      {% endfor %}
    </select>
  </div>

  <table id="riskMatrix">
    <tr>
      <th>Controllability</th>
      <th>Exposure</th>
      <th colspan="4" class="severity-header">Severity</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      {% for level in site.data.severity_matrix.asil_levels.severity %}
        <th>{{ level.id }}</th>
      {% endfor %}
    </tr>
    {% for c in site.data.severity_matrix.risk_matrix %}
      {% assign controllability = c[0] %}
      {% assign exposures = c[1] %}
      {% for e in exposures %}
        {% assign exposure = e[0] %}
        {% assign severities = e[1] %}
        <tr>
          <td>{% if forloop.first %}{{ controllability }}{% endif %}</td>
          <td>{{ exposure }}</td>
          {% for s in site.data.severity_matrix.asil_levels.severity %}
            <td class="{{ severities[s.id] | downcase }}" 
                data-c="{{ controllability }}"
                data-e="{{ exposure }}"
                data-s="{{ s.id }}">
              {{ severities[s.id] }}
            </td>
          {% endfor %}
        </tr>
      {% endfor %}
    {% endfor %}
  </table>
</div>

<style>
  /* Your existing CSS */
</style>

<script>
  // Simplified JavaScript for highlighting
  function highlightCell() {
    const severity = document.getElementById('severity').value;
    const exposure = document.getElementById('exposure').value;
    const controllability = document.getElementById('controllability').value;
    
    document.querySelectorAll('.highlighted').forEach(el => el.classList.remove('highlighted'));
    
    document.querySelector(`[data-c="${controllability}"][data-e="${exposure}"][data-s="${severity}"]`)
      ?.classList.add('highlighted');
  }

  ['severity', 'exposure', 'controllability'].forEach(id => {
    document.getElementById(id).addEventListener('change', highlightCell);
  });

  highlightCell();
</script>
