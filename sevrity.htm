---
layout: default
title: Severity Assessment Matrix
---

<div class="container">
  <div class="controls">
    <select id="severity">
      <option value="S0">S₀ No injuries</option>
      <option value="S1">S₁ Light to moderate injuries</option>
      <option value="S2">S₂ Severe to life-threatening</option>
      <option value="S3">S₃ Life-threatening to fatal</option>
    </select>
    <select id="exposure">
      <option value="E1">E₁ Very low probability</option>
      <option value="E2">E₂ Low probability</option>
      <option value="E3">E₃ Medium probability</option>
      <option value="E4">E₄ High probability</option>
    </select>
    <select id="controllability">
      <option value="C1">C₁ No injuries</option>
      <option value="C2">C₂ Normally controllable</option>
      <option value="C3">C₃ Difficult to control</option>
    </select>
  </div>

  <table id="riskMatrix">
    <tr>
      <th>Controllability</th>
      <th>Exposure</th>
      <th colspan="4" class="severity-header">Severity</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>S0</th>
      <th>S1</th>
      <th>S2</th>
      <th>S3</th>
    </tr>
    {% for c_entry in site.data.severity_matrix.matrix %}
      {% assign controllability = c_entry[0] %}
      {% assign exposures = c_entry[1] %}
      {% for e_entry in exposures %}
        {% assign exposure = e_entry[0] %}
        {% assign severities = e_entry[1] %}
        <tr>
          <td>{% if forloop.first %}{{ controllability }}{% endif %}</td>
          <td>{{ exposure }}</td>
          {% for s_level in severities %}
            <td class="{{ s_level[1] | downcase }}" 
                data-c="{{ controllability }}"
                data-e="{{ exposure }}"
                data-s="{{ s_level[0] }}">{{ s_level[1] }}</td>
          {% endfor %}
        </tr>
      {% endfor %}
    {% endfor %}
  </table>
</div>

<style>
  .container { max-width: 1000px; margin: 20px auto; font-family: Arial, sans-serif; }
  .controls { margin-bottom: 20px; }
  select { padding: 8px; margin-right: 15px; }
  table { border-collapse: collapse; width: 100%; }
  th, td { 
    border: 1px solid #000; 
    padding: 12px; 
    text-align: center;
  }
  th { background-color: white; font-weight: bold; }
  .highlighted { border: 2px solid red !important; }
  .qm { background-color: #e8f5e9; }
  .a { background-color: #fff9c4; }
  .b { background-color: #ffe0b2; }
  .c { background-color: #ffcdd2; }
  .d { background-color: #ff8a80; }
  .severity-header { font-size: 1.2em; font-weight: bold; }
</style>

<script>
function highlightCell() {
  const severity = document.getElementById('severity').value;
  const exposure = document.getElementById('exposure').value;
  const controllability = document.getElementById('controllability').value;
  
  document.querySelectorAll('.highlighted').forEach(el => {
    el.classList.remove('highlighted');
  });
  
  document.querySelector(`[data-c="${controllability}"][data-e="${exposure}"][data-s="${severity}"]`)
    ?.classList.add('highlighted');
}

['severity', 'exposure', 'controllability'].forEach(id => {
  document.getElementById(id).addEventListener('change', highlightCell);
});

highlightCell();
</script>
